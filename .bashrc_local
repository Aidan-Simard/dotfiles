# Opens tmux with neovim and 2 empty windows
d () {
  WD=$(pwd | rev | cut -d "/" -f 1 | rev)
  tmux new-session -d -n 'nvim'
  tmux rename-session $WD
  tmux send-keys -t 'nvim' 'nvim .' Enter
  tmux new-window
  tmux new-window
  tmux select-window -t 'nvim'
  tmux attach-session -d
}

# Automatically start python virtual environments on cd
function cd() {
  builtin cd "$@"

  if [[ -z "$VIRTUAL_ENV" ]] ; then
    ## If env folder is found then activate the vitualenv
      if [[ -d ./venv ]] ; then
        source ./venv/bin/activate
      fi
  else
    ## check the current folder belong to earlier VIRTUAL_ENV folder
    # if yes then do nothing
    # else deactivate
      parentdir="$(dirname "$VIRTUAL_ENV")"
      if [[ "$PWD"/ != "$parentdir"/* ]] ; then
        deactivate
      fi
  fi
}

# Set a colored PS1 with no user/host/chroot, showing only the path
export PS1='\[\033[01;32m\]\u@\h\[\033[00m\]: \[\033[01;34m\]\w\[\033[00m\] â€¢ '

PATH=$PATH:/opt/nvim/bin
